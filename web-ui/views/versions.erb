<div class="versions_div">
  <% [Uhuru::BoshCommander::Versioning::Product::TYPE_UCC, Uhuru::BoshCommander::Versioning::Product::TYPE_STEMCELL, Uhuru::BoshCommander::Versioning::Product::TYPE_SOFTWARE].each do |type| %>
        <% products.each do |product| %>
          <% if product[1].type == type %>
              <span class="table_title"><%= product[1].label %></span>
              <span class="table_title"><%= type %></span>

              <table class="versions_table">
                <thead>
                <tr class="settings_table_header">
                  <td>Version</td>
                  <td>Dependencies</td>
                  <td>Deployments</td>
                  <td>Size</td>
                  <td>State</td>
                  <td>Description</td>
                  <td>Actions</td>
                </tr>
                </thead>

                <tbody>
                <% product[1].versions.each do |version| %>
                    <tr>
                      <!-- VERSION -->
                      <td class="td_versions">
                        <%= version[1].version %>
                      </td>

                      <!-- DEPENDENCIES -->
                      <td>
                        <% version[1].dependencies.each do |dependency| %>
                            <%= dependency['dependency'] %>
                                (
                                    <% if dependency['version'].count != nil %>
                                        <% dependency['version'].each_with_index do |version, index| %>
                                            <% if index < dependency['version'].length - 1 %>
                                                <%= version + ', ' %>
                                            <% else %>
                                                <%= version %>
                                            <% end %>
                                        <% end %>
                                    <% end %>
                                )
                            <br />
                        <% end %>
                      </td>


                      <% Uhuru::BoshCommander::CommanderBoshRunner.execute(session) do %>

                          <!-- DEPLOYMENTS -->
                          <td>
                            <%= version[1].deployments %>
                          </td>

                          <!-- SIZE -->
                          <td class="td_size">
                            <%= version[1].location.size %>
                          </td>

                          <!-- STATE -->
                          <td class="td_state">
                                <%= version[1].get_state %>
                          </td>

                          <!-- DESCRIPTION -->
                          <td>
                            <%= version[1].description %>
                          </td>

                          <!-- ACTION -->
                          <td>
                            <% if version[1].get_state.to_s == '5' %>
                                <input type="button" value="Delete" />
                            <% end %>

                            <% if version[1].get_state.to_s != '1' %>
                                <input type="button" value="Download" />
                            <% end %>

                            <!-- button de remove daca are state remote only -->

                          </td>

                      <% end %>

                    </tr>
                <% end %>
                </tbody>
              </table>
          <% end %>
      <% end %>
  <% end %>
</div>
