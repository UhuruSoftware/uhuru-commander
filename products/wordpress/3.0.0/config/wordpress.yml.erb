---
name: wordpress
director_uuid: 74cee69e-2cd8-4c99-96c8-f332e4967021

release:
  name: wordpress
  version: 3.0.0

compilation:
  workers: 4
  network: default
  cloud_properties:
    ram: 2048
    disk: 8096
    cpu: 2

# this section describes how updates are handled
update:
  canaries: 1
  canary_watch_time: 30000
  update_watch_time: 30000
  max_in_flight: 4
  max_errors: 1

networks:

- name: default
  subnets:
  - reserved: []
    static: []
    range:
    gateway:
    dns: []
    cloud_properties:
      name:

resource_pools:
  - name: infrastructure
    network: default
    size: 6
    stemcell:
      name: <%= $config[:bosh][:stemcells][:linux_php_stemcell][:name] %>
      version: <%= $config[:bosh][:stemcells][:linux_php_stemcell][:version] %>
    cloud_properties:
      cpu: 1
      disk: 8192
      ram: 2048

jobs:
  - name: mysql
    template: mysql
    instances: 1
    resource_pool: infrastructure
    persistent_disk: 16384
    networks:
    - name: default
      static_ips:

  - name: wordpress
    template: wordpress
    instances: 1
    resource_pool: infrastructure
    networks:
    - name: default
      static_ips:

  - name: nginx
    template: nginx
    instances: 1
    resource_pool: infrastructure
    networks:
    - name: default
      static_ips:

properties:

  wordpress:
    admin: foo@bar.com
    port: 8008
    servers:
    servername: wp.appcloud14.dev.mozycloud.com
    db:
      name: wp
      user: wordpress
      pass: <%= SecureRandom.hex %>
    auth_key: <%= SecureRandom.hex %>
    secure_auth_key: <%= SecureRandom.hex %>
    logged_in_key: <%= SecureRandom.hex %>
    nonce_key: <%= SecureRandom.hex %>
    auth_salt: <%= SecureRandom.hex %>
    secure_auth_salt: <%= SecureRandom.hex %>
    logged_in_salt: <%= SecureRandom.hex %>
    nonce_salt: <%= SecureRandom.hex %>

  mysql:
    address: 172.31.220.20
    port: 3306
    password: <%= SecureRandom.hex %>

  nginx:
    workers: 1
